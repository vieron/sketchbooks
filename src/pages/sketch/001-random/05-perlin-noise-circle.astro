---
import Sketch from "../../../layouts/Sketch.astro";
---

<Sketch title="003 Line">
  <script>
    import "p5";

    let noiseMax = 1; // between 0 and 10
    let phase = 0;
    let zoff = 0;

    window.setup = () => {
      // noLoop();
      createCanvas(windowWidth, windowHeight);
    };

    window.draw = () => {
      let radiusVariation = Math.min(windowWidth, windowHeight) * 0.1;
      let avgRadius = Math.min(windowWidth, windowHeight) * 0.3;
      let minRadius = avgRadius - radiusVariation * 0.5;
      let maxRadius = avgRadius + radiusVariation * 0.5;

      translate(width / 2, height / 2);
      background(color("#fca311"));
      strokeWeight(8);
      stroke(0);
      noFill();
      beginShape();
      for (let a = 0; a < TWO_PI; a += radians(5)) {
        let xoff = map(cos(a + phase), -1, 1, 0, noiseMax);
        let yoff = map(sin(a + phase), -1, 1, 0, noiseMax);
        let r = map(noise(xoff, yoff, zoff), 0, 1, minRadius, maxRadius);
        let x = r * cos(a);
        let y = r * sin(a);
        vertex(x, y);
      }
      endShape(CLOSE);
      phase += 0;
      zoff += 0.005;
    };
  </script>
</Sketch>
